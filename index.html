<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸€å¹´çº§ä¸€ç­åŒå­¦å­¦ä¹ å¡</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #e0f7fa 0%, #f3e5f5 100%);
            padding: 20px;
            min-height: 100vh;
        }
        
        .header {
            text-align: center;
            padding: 20px 0;
            background-color: #7e57c2;
            color: white;
            border-radius: 15px 15px 0 0;
            margin-bottom: 25px;
            box-shadow: 0 4px 15px rgba(126, 87, 194, 0.3);
        }
        
        h1 {
            font-size: 2.2rem;
            margin-bottom: 15px;
        }
        
        .instruction {
            background-color: #ffecb3;
            color: #5d4037;
            padding: 15px;
            border-radius: 10px;
            margin: 20px auto;
            max-width: 600px;
            font-weight: bold;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        
        .instructions p {
            margin: 10px 0;
            font-size: 1.1rem;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }
        
        .control-btn {
            padding: 12px 25px;
            background-color: #5c6bc0;
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .control-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 12px rgba(0, 0, 0, 0.3);
        }
        
        .sound-toggle {
            background-color: #4caf50;
            /* No special positioning needed, flex handles it */
        }
        
        .sound-toggle.muted {
            background-color: #f44336;
        }
        
        .sound-toggle::before {
            content: '';
            /* Sizing for the flex item (icon) */
            flex-shrink: 0;
            width: 24px;
            height: 24px;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
        }
        
        .sound-toggle:not(.muted)::before {
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/></svg>');
        }
        
        .sound-toggle.muted::before {
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white"><path d="M3.63 3.63a.996.996 0 0 0 0 1.41L7.29 9H3v6h4l5 5v-6.59l4.18 4.18c-.65.49-1.38.88-2.18 1.11v2.06c1.34-.3 2.57-.92 3.61-1.75l2.04 2.04 1.41-1.41L5.05 3.63c-.39-.39-1.02-.39-1.42 0zM19 12c0 .94-.2 1.82-.54 2.64l1.51 1.51A8.96 8.96 0 0 0 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zm-7-8l-4.59 4.59L9 7.83V3h2v1z"/></svg>');
        }
        
        .student-container {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 25px;
            max-width: 1300px;
            margin: 0 auto;
        }
        
        .gender-section {
            flex: 1;
            min-width: 300px;
            max-width: 600px;
        }
        
        .gender-title {
            text-align: center;
            margin-bottom: 25px;
            padding: 12px;
            border-radius: 10px;
            color: white;
            font-size: 1.5rem;
        }
        
        .boys .gender-title {
            background-color: #29b6f6;
        }
        
        .girls .gender-title {
            background-color: #ec407a;
        }
        
        .student-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(170px, 1fr));
            gap: 18px;
        }
        
        .student-card {
            background-color: white;
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
        }
        
        .student-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }
        
        .student-card.boy:hover {
            background-color: #e1f5fe;
            border: 2px solid #81d4fa;
        }
        
        .student-card.girl:hover {
            background-color: #fce4ec;
            border: 2px solid #f8bbd0;
        }
        
        .student-name {
            font-size: 1.8rem;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .student-pinyin {
            color: #78909c;
            font-size: 1.1rem;
            margin-bottom: 5px;
        }
        
        .student-gender {
            font-size: 1rem;
            padding: 3px 10px;
            border-radius: 15px;
            display: inline-block;
        }
        
        .student-card.boy .student-gender {
            background-color: #e1f5fe;
            color: #0288d1;
        }
        
        .student-card.girl .student-gender {
            background-color: #fce4ec;
            color: #d81b60;
        }
        
        .speaker-icon {
            position: absolute;
            top: 5px;
            right: 5px;
            font-size: 1.3rem;
            opacity: 0.3;
        }
        
        .active {
            animation: pulse 0.5s;
            border: 2px solid #ffc107;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            color: #757575;
            font-size: 0.9rem;
        }
        
        @media (max-width: 768px) {
            .student-container {
                flex-direction: column;
                align-items: center;
            }
            
            .gender-section {
                width: 100%;
            }
            
            .control-btn {
                padding: 10px 20px;
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ä¸€å¹´çº§ä¸€ç­åŒå­¦å­¦ä¹ å¡</h1>
        <p>ç‚¹å‡»å¡ç‰‡å¬åŒå­¦åå­—çš„å‘éŸ³</p>
    </div>
    
    <div class="instruction">
        å°æœ‹å‹ï¼Œç‚¹å‡»ä¸‹é¢çš„åå­—å¡ç‰‡ï¼Œå¯ä»¥å¬åˆ°åŒå­¦çš„å§“åå‘éŸ³å“¦ï¼
    </div>
    
    <div class="controls">
        <button id="playAllBoys" class="control-btn">é¡ºåºæœ—è¯»ç”·åŒå­¦</button>
        <button id="playAllGirls" class="control-btn">é¡ºåºæœ—è¯»å¥³åŒå­¦</button>
        <button id="toggleMute" class="control-btn sound-toggle">å£°éŸ³å¼€å¯</button>
    </div>
    
    <div class="student-container">
        <!-- ç”·ç”Ÿéƒ¨åˆ† -->
        <div class="gender-section boys">
            <div class="gender-title">ç”·åŒå­¦</div>
            <div class="student-list" id="boysList">
                <!-- ç”·ç”Ÿåå•ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>
        </div>
        
        <!-- å¥³ç”Ÿéƒ¨åˆ† -->
        <div class="gender-section girls">
            <div class="gender-title">å¥³åŒå­¦</div>
            <div class="student-list" id="girlsList">
                <!-- å¥³ç”Ÿåå•ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>
        </div>
    </div>
    
    <div class="footer">
        æç¤ºï¼šè¯·ç¡®ä¿è®¾å¤‡éŸ³é‡å·²æ‰“å¼€ | é€‚ç”¨äºChromeã€Edgeã€Firefoxç­‰ç°ä»£æµè§ˆå™¨
    </div>

    <script>
        // ç­çº§å­¦ç”Ÿæ•°æ®
        const classmates = [
            // ç”·ç”Ÿ
            { name: "å¸¸å®‡", gender: "ç”·", pinyin: "ChÃ¡ng YÇ”" },
            { name: "é™ˆå­ç‰", gender: "ç”·", pinyin: "ChÃ©n ZÇyÃ¹" },
            { name: "æœæ³½æºª", gender: "ç”·", pinyin: "DÃ¹ ZÃ©xÄ«" },
            { name: "è€¿è¨€è¹Š", gender: "ç”·", pinyin: "GÄ›ng YÃ¡nxÄ«" },
            { name: "å§¬æ¥·çƒ¨", gender: "ç”·", pinyin: "JÄ« KÇiyÃ¨" },
            { name: "æä¿Šç…¦", gender: "ç”·", pinyin: "LÇ JÃ¹nxÃ¹" },
            { name: "ææ˜“æ’", gender: "ç”·", pinyin: "LÇ YÃ¬hÃ©ng" },
            { name: "ææ¢“æ™¨", gender: "ç”·", pinyin: "LÇ ZÇchÃ©n" },
            { name: "åˆ˜æµ©è½©", gender: "ç”·", pinyin: "LiÃº HÃ oxuÄn" },
            { name: "åˆ˜èŠ·éœ–", gender: "ç”·", pinyin: "LiÃº ZhÇlÃ­n" },
            { name: "é©¬è‹¥å®¸", gender: "ç”·", pinyin: "MÇ RuÃ²chÃ©n" },
            { name: "å½­ä¸€é¸£", gender: "ç”·", pinyin: "PÃ©ng YÄ«mÃ­ng" },
            { name: "å­™å®œæ©", gender: "ç”·", pinyin: "SÅ«n YÃ­â€™Ä“n" },
            { name: "ç‹ç¨‹ç…Š", gender: "ç”·", pinyin: "WÃ¡ng ChÃ©ngxuÄn" },
            { name: "ç‹æ±˜å¯»", gender: "ç”·", pinyin: "WÃ¡ng QiÄnxÃºn" },
            { name: "ç‹å­è‡»", gender: "ç”·", pinyin: "WÃ¡ng ZÇzhÄ“n" },
            { name: "å´æ˜Šå®‡", gender: "ç”·", pinyin: "WÃº HÃ oyÇ”" },
            { name: "å¾å¥å®", gender: "ç”·", pinyin: "XÃº JiÃ nnÃ­ng" },
            { name: "é—«é¢¢æ£®", gender: "ç”·", pinyin: "YÃ¡n HÃ osÄ“n" },
            { name: "æ¨æ¯…åš", gender: "ç”·", pinyin: "YÃ¡ng YÃ¬bÃ³" },
            { name: "å¼ è´ºé“­", gender: "ç”·", pinyin: "ZhÄng HÃ¨mÃ­ng" },
            { name: "å¼ èˆ’ç²²", gender: "ç”·", pinyin: "ZhÄng ShÅ«cÃ n" },
            { name: "å¼ é€¸ç¢", gender: "ç”·", pinyin: "ZhÄng YÃ¬suÄ«" },
            { name: "èµµæ¢“ç¿", gender: "ç”·", pinyin: "ZhÃ o ZÇruÃ¬" },
            { name: "å‘¨æ˜±æ—", gender: "ç”·", pinyin: "ZhÅu YÃ¹lÃ­n" },
            
            // å¥³ç”Ÿ
            { name: "æˆ´æ¢“å«£", gender: "å¥³", pinyin: "DÃ i ZÇyÄn" },
            { name: "æˆ¿å®¶ç¿", gender: "å¥³", pinyin: "FÃ¡ng JiÄruÃ¬" },
            { name: "æˆ¿å®¶å®œ", gender: "å¥³", pinyin: "FÃ¡ng JiÄyÃ­" },
            { name: "è‘›ä¾ç„¶", gender: "å¥³", pinyin: "GÄ› YÄ«rÃ¡n" },
            { name: "ä½•å©§æ€¡", gender: "å¥³", pinyin: "HÃ© JÃ¬ngyÃ­" },
            { name: "å­”æŸ é˜³", gender: "å¥³", pinyin: "KÇ’ng NÃ­ngyÃ¡ng" },
            { name: "æå›­æ…ˆ", gender: "å¥³", pinyin: "LÇ YuÃ¡ncÃ­" },
            { name: "åˆ˜æ´›ä¼Š", gender: "å¥³", pinyin: "LiÃº LuÃ²yÄ«" },
            { name: "åˆ˜ç†™åª›", gender: "å¥³", pinyin: "LiÃº XÄ«yuÃ¡n" },
            { name: "é©¬å¢¨æ¶µ", gender: "å¥³", pinyin: "MÇ MÃ²hÃ¡n" },
            { name: "ç‰›å§šé¦¨", gender: "å¥³", pinyin: "NiÃº YÃ¡oxÄ«n" },
            { name: "ä»»å˜‰å®", gender: "å¥³", pinyin: "RÃ¨n JiÄbÇo" },
            { name: "å®‹ä¸€å½¤", gender: "å¥³", pinyin: "SÃ²ng YÄ«tÃ³ng" },
            { name: "ç‹æ™¨è¯­", gender: "å¥³", pinyin: "WÃ¡ng ChÃ©nyÇ”" },
            { name: "ç‹è¯—é›¨", gender: "å¥³", pinyin: "WÃ¡ng ShÄ«yÇ”" },
            { name: "è‚–è‰ºæ©¦", gender: "å¥³", pinyin: "XiÄo YÃ¬tÃ³ng" },
            { name: "é—«ä½³æ·‡", gender: "å¥³", pinyin: "YÃ¡n JiÄqÃ­" },
            { name: "æ¸¸æ¢“å¸Œ", gender: "å¥³", pinyin: "YÃ³u ZÇxÄ«" },
            { name: "å¼ æƒœé¢œ", gender: "å¥³", pinyin: "ZhÄng XÄ«yÃ¡n" },
            { name: "èµµç‚å¦", gender: "å¥³", pinyin: "ZhÃ o KÄ“yÃ¡n" },
            { name: "éƒ‘çš“æœˆ", gender: "å¥³", pinyin: "ZhÃ¨ng HÃ oyuÃ¨" },
            { name: "åˆ˜æ¡‰ç»®", gender: "å¥³", pinyin: "LiÃº Ä€nqÇ" }
        ];

        // DOMå…ƒç´ 
        const boysList = document.getElementById('boysList');
        const girlsList = document.getElementById('girlsList');
        const playAllBoys = document.getElementById('playAllBoys');
        const playAllGirls = document.getElementById('playAllGirls');
        const toggleMute = document.getElementById('toggleMute');
        
        // å…¨å±€çŠ¶æ€
        let isMuted = false;
        let isPlaying = false;
        let audioUnlocked = false; // ç”¨äºè·Ÿè¸ªéŸ³é¢‘æ˜¯å¦è¢«ç”¨æˆ·æ‰‹åŠ¿æ¿€æ´»

        // æ£€æŸ¥æµè§ˆå™¨æ˜¯å¦æ”¯æŒè¯­éŸ³åˆæˆ
        function supportsSpeechSynthesis() {
            return 'speechSynthesis' in window;
        }

        // â€œè§£é”â€éŸ³é¢‘çš„å‡½æ•°
        function unlockAudio() {
            if (audioUnlocked) return;
            // å°è¯•æ’­æ”¾ä¸€ä¸ªæ— å£°çš„è¯­éŸ³æ¥æ¿€æ´»
            const utterance = new SpeechSynthesisUtterance('');
            window.speechSynthesis.speak(utterance);
            audioUnlocked = true;
        }

        // æœ—è¯»åå­—çš„å‡½æ•°
        function speakName(name, element = null, onEndCallback = null) {
            if (!supportsSpeechSynthesis()) return;

            // è§†è§‰åé¦ˆ
            if (element) {
                element.classList.add('active');
                setTimeout(() => element.classList.remove('active'), 500);
            }

            if (isMuted) {
                if (onEndCallback) onEndCallback();
                return;
            }
            
            // åœ¨æ±‰å­—ä¹‹é—´æ·»åŠ ç©ºæ ¼ä»¥æé«˜å‘éŸ³æ¸…æ™°åº¦
            const spacedName = name.split('').join(' ');

            const utterance = new SpeechSynthesisUtterance(spacedName);
            utterance.lang = 'zh-CN';
            utterance.rate = 0.8; // é™ä½è¯­é€Ÿ
            
            utterance.onend = () => {
                if (onEndCallback) {
                    setTimeout(onEndCallback, 300); // åå­—ä¹‹é—´å¢åŠ ä¸€ç‚¹å»¶è¿Ÿ
                }
            };

            // åœ¨æ’­æ”¾å‰æ¸…é™¤ä¹‹å‰çš„é˜Ÿåˆ—ï¼Œé˜²æ­¢é‡å 
            window.speechSynthesis.cancel(); 
            window.speechSynthesis.speak(utterance);
        }

        // é¡ºåºæœ—è¯»å‡½æ•°
        function playAll(gender) {
            if (isPlaying) return; // å¦‚æœæ­£åœ¨æ’­æ”¾ï¼Œåˆ™ä¸å…è®¸å†æ¬¡ç‚¹å‡»
            
            unlockAudio(); // æ¯æ¬¡å¼€å§‹æœ—è¯»å‰éƒ½å°è¯•è§£é”

            isPlaying = true;
            const list = gender === 'ç”·' ? boysList : girlsList;
            const cards = list.querySelectorAll('.student-card');
            let currentIndex = 0;

            function next() {
                if (currentIndex < cards.length && isPlaying) {
                    const card = cards[currentIndex];
                    const name = card.querySelector('.student-name').textContent;
                    speakName(name, card, () => {
                        currentIndex++;
                        next();
                    });
                } else {
                    isPlaying = false; // é˜Ÿåˆ—æ’­æ”¾å®Œæˆ
                }
            }

            next();
        }

        // åœæ­¢æ‰€æœ‰æœ—è¯»
        function stopAllPlayback() {
            isPlaying = false;
            window.speechSynthesis.cancel();
        }

        // åˆå§‹åŒ–é¡µé¢
        function initPage() {
            // åˆ›å»ºå­¦ç”Ÿå¡ç‰‡
            classmates.forEach(student => {
                const card = document.createElement('div');
                card.className = `student-card ${student.gender === 'ç”·' ? 'boy' : 'girl'}`;
                card.innerHTML = `
                    <span class="speaker-icon">ğŸ”Š</span>
                    <div class="student-name">${student.name}</div>
                    <div class="student-pinyin">${student.pinyin}</div>
                    <div class="student-gender">${student.gender}</div>
                `;
                
                card.addEventListener('click', () => {
                    unlockAudio(); // æ¯æ¬¡ç‚¹å‡»éƒ½å°è¯•æ¿€æ´»éŸ³é¢‘
                    stopAllPlayback(); // å¦‚æœæ­£åœ¨é¡ºåºæœ—è¯»ï¼Œåˆ™åœæ­¢
                    speakName(student.name, card);
                });
                
                if (student.gender === 'ç”·') {
                    boysList.appendChild(card);
                } else {
                    girlsList.appendChild(card);
                }
            });
            
            playAllBoys.addEventListener('click', () => playAll('ç”·'));
            playAllGirls.addEventListener('click', () => playAll('å¥³'));
            
            toggleMute.addEventListener('click', () => {
                isMuted = !isMuted;
                
                if (isMuted) {
                    toggleMute.textContent = 'å£°éŸ³å…³é—­';
                    toggleMute.classList.add('muted');
                    stopAllPlayback(); // é™éŸ³æ—¶åœæ­¢æ‰€æœ‰æ’­æ”¾
                } else {
                    toggleMute.textContent = 'å£°éŸ³å¼€å¯';
                    toggleMute.classList.remove('muted');
                }
            });
            
            if (!supportsSpeechSynthesis()) {
                alert('æç¤ºï¼šæ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè¯­éŸ³æœ—è¯»åŠŸèƒ½ã€‚è¯·ä½¿ç”¨ Chromeã€Edge æˆ– Safari æ‰“å¼€æ­¤é¡µé¢ã€‚');
                toggleMute.disabled = true;
                toggleMute.textContent = 'ä¸æ”¯æŒè¯­éŸ³';
                toggleMute.classList.add('muted');
            }

            // å¢åŠ ä¸€ä¸ªå…¨å±€ç‚¹å‡»äº‹ä»¶æ¥é¦–æ¬¡æ¿€æ´»éŸ³é¢‘
            document.body.addEventListener('click', unlockAudio, { once: true });
        }

        window.addEventListener('DOMContentLoaded', initPage);
    </script>
</body>
</html>

